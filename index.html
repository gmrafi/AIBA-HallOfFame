<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AIBA Sylhet - Hall of Fame</title>

    <!-- Google Font: Inter (400, 600, 700) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      // Tailwind CDN config: enable dark mode via class and blue glow
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            boxShadow: {
              glow: '0 8px 30px rgba(37,99,235,0.25)',
            },
            colors: {
              brand: {
                green: '#1E5A3C',
                amber: '#F59E0B',
                blue: '#3D54E6'
              }
            },
          },
        },
      };
    </script>

    <!-- Alpine.js for interactivity -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <!-- Minimal helper to map `font-inter` to Inter without external CSS file -->
    <style>
      .font-inter {
        font-family: 'Inter', ui-sans-serif, system-ui, -apple-system, "Segoe UI",
          Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji",
          "Segoe UI Symbol";
      }
      /* Decorative gradient background helpers */
      .gradient-grid {
        background-image: radial-gradient(circle at 1px 1px, rgba(0,0,0,0.08) 1px, transparent 0);
        background-size: 24px 24px;
        pointer-events: none;
      }
      :root {
        --brand-green: #1E5A3C;
        --brand-amber: #F59E0B;
        --brand-blue: #3D54E6;
      }
      .brand-gradient {
        background: linear-gradient(135deg, var(--brand-green) 0%, var(--brand-blue) 55%, var(--brand-amber) 100%);
      }
      .brand-ring:hover {
        box-shadow: 0 0 0 3px var(--brand-blue), 0 0 0 6px rgba(255,255,255,0.6);
      }
      .underline-accent {
        position: relative;
      }
      .underline-accent:after {
        content: '';
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        bottom: -8px;
        width: 96px;
        height: 4px;
        border-radius: 999px;
        background: var(--brand-green);
        opacity: .7;
        pointer-events: none;
      }
      .chip-selected {
        background: var(--brand-blue) !important;
        color: #fff !important;
        border-color: var(--brand-blue) !important;
      }
      .card-border:hover {
        border-color: var(--brand-green) !important;
        box-shadow: 0 8px 24px -6px rgba(30,90,60,.35);
      }
      .hero-blob {
        position: absolute;
        border-radius: 999px;
        filter: blur(90px);
        opacity: 0.5;
        pointer-events: none;
      }
      .hero-blob--blue {
        background: rgba(61,84,230,0.45);
        width: 320px;
        height: 320px;
        top: -70px;
        right: -30px;
      }
      .hero-blob--gold {
        background: rgba(245,158,11,0.4);
        width: 260px;
        height: 260px;
        bottom: 10%;
        left: -60px;
      }
      .hero-blob--green {
        background: rgba(30,90,60,0.45);
        width: 220px;
        height: 220px;
        top: 40%;
        right: 15%;
      }
      .hero-pill {
        background: rgba(30,90,60,0.1);
        border: 1px solid rgba(30,90,60,0.3);
        color: var(--brand-green);
        box-shadow: inset 0 0 0 1px rgba(255,255,255,0.2);
      }
      .hero-card {
        border-radius: 16px;
        background: #ffffff;
        box-shadow: 0 12px 24px -10px rgba(16,24,40,0.18);
        border: 1px solid #eef2f7;
      }
      .dark .hero-card {
        background: #0f172a;
        border-color: #1f2937;
        box-shadow: 0 12px 24px -10px rgba(0,0,0,0.6);
      }
      .hero-highlight {
        border-radius: 20px;
        background: linear-gradient(135deg, rgba(30,90,60,0.08), rgba(61,84,230,0.08));
        border: 1px solid rgba(30,90,60,0.15);
      }
      /* Mini equalizer widget for playing state */
      .eq-bars { display:flex; gap:2px; align-items:flex-end; height:16px; width:22px; }
      .eq-bars span { width:3px; height:8px; background: var(--brand-blue); border-radius:2px; transform-origin: bottom; animation: eq-bounce 900ms ease-in-out infinite; animation-play-state: paused; }
      .eq-playing span { animation-play-state: running; }
      .eq-bars span:nth-child(2){ animation-delay: 120ms; background: var(--brand-green);} 
      .eq-bars span:nth-child(3){ animation-delay: 240ms; background: var(--brand-amber);} 
      .eq-bars span:nth-child(4){ animation-delay: 360ms; background: var(--brand-blue);} 
      .eq-bars span:nth-child(5){ animation-delay: 480ms; background: var(--brand-green);} 
      @keyframes eq-bounce { 0%,100%{ transform: scaleY(0.3);} 50%{ transform: scaleY(1); } }
      /* Celebration mode */
      .celebrate .header-bounce { animation: header-bob 1200ms ease-in-out infinite; }
      @keyframes header-bob { 0%,100%{ transform: translateY(0);} 50%{ transform: translateY(-4px);} }
      .celebrate .accent-pulse { position: relative; }
      .celebrate .accent-pulse:after {
        content:''; position:absolute; inset:0; border-radius: inherit;
        box-shadow: 0 0 0 0 rgba(61,84,230,0.35);
        animation: pulse-ring 2s ease-out infinite;
      }
      @keyframes pulse-ring { 0%{ box-shadow:0 0 0 0 rgba(61,84,230,0.35);} 70%{ box-shadow:0 0 0 12px rgba(61,84,230,0);} 100%{ box-shadow:0 0 0 0 rgba(61,84,230,0);} }
      .confetti-container { position: fixed; inset: 0; pointer-events: none; z-index: 60; overflow: hidden; }
      .confetti-piece { position: absolute; top: -10px; width: 6px; height: 10px; border-radius: 1px; opacity: .9; animation: confetti-fall var(--dur,3.2s) linear forwards; }
      @keyframes confetti-fall { to { transform: translateY(110vh) rotate(540deg);} }
      /* Logo marquee */
      .logo-marquee { position: relative; overflow: hidden; }
      .logo-track { display: flex; gap: 2rem; animation: marquee-scroll 25s linear infinite; white-space: nowrap; }
      .logo-track:hover { animation-play-state: paused; }
      @keyframes marquee-scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
      .partner-logo { height: 48px; width: auto; object-fit: contain; filter: none; opacity: 1; transition: transform 0.3s; }
      .partner-logo:hover { transform: scale(1.1); }
      .org-logo { height: 20px; width: auto; object-fit: contain; }
      .org-logo-lg { height: 28px; width: auto; object-fit: contain; }
    </style>
  </head>
  <body x-data="hofApp()" x-init="init()" class="bg-gray-50 font-inter">
    <!-- Navbar -->
    <nav class="sticky top-0 z-40 backdrop-blur supports-[backdrop-filter]:bg-white/80 dark:supports-[backdrop-filter]:bg-gray-900/70 bg-white/95 dark:bg-gray-900/90 text-gray-900 dark:text-gray-100 border-b border-gray-200 dark:border-gray-800">
      <div class="container mx-auto px-6 py-4 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <img src="photos/aibalogo.jpg" alt="AIBA Logo" class="h-10 w-auto rounded-md shadow-md brand-ring" loading="lazy" />
          <h1 class="text-xl sm:text-2xl font-bold tracking-tight" style="color: var(--brand-green)">AIBA Hall of Fame</h1>
          <div x-show="audioPlaying" class="hidden sm:flex ml-1 eq-bars eq-paused" :class="audioPlaying ? 'eq-playing' : ''" aria-label="Now Playing" title="Now Playing">
            <span></span><span></span><span></span><span></span><span></span>
          </div>
        </div>
        <div class="flex items-center gap-2">
          <button @click="toggleAudio" class="inline-flex items-center gap-2 rounded-lg px-3 py-2 text-sm border border-gray-200 hover:bg-gray-100 transition" title="Play/Pause">
            <svg x-show="!audioPlaying" xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
            <svg x-show="audioPlaying" xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
            <span class="hidden sm:inline" x-text="audioPlaying ? 'Pause Song' : 'Play Song'"></span>
          </button>
          <button @click="toggleCelebrate" :class="celebrate ? 'bg-brand-amber text-white border-brand-amber' : 'text-brand-amber'" class="inline-flex items-center gap-2 rounded-lg px-3 py-2 text-sm border border-brand-amber hover:bg-brand-amber/10 transition" title="Celebration Mode">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor"><path d="M2 22l14-5-9-9-5 14zm6.5-12.5l9 9 4.5-4.5-9-9-4.5 4.5z"/></svg>
            <span class="hidden sm:inline" x-text="celebrate ? 'Celebration On' : 'Celebration Mode'"></span>
          </button>
        </div>
      </div>
    </nav>

    <!-- Hero -->
    <header class="relative overflow-hidden">
      <div class="bg-white dark:bg-gray-900 header-bounce">
        <div class="container mx-auto px-6 pt-12 pb-16">
          <div class="grid grid-cols-1 lg:grid-cols-[1fr_1.25fr] items-center gap-10">
            <!-- Left: Headline & Search -->
            <div>
              <span class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full border border-brand-green/40 text-brand-green bg-white dark:bg-gray-900 text-sm">Army Institute of Business Administration, Sylhet</span>
              <h2 class="underline-accent mt-5 text-4xl sm:text-5xl font-extrabold tracking-tight" style="color: var(--brand-green)">AIBA Hall of Fame</h2>
              <p class="mt-4 text-lg sm:text-xl text-gray-600 dark:text-gray-300 max-w-xl">Celebrating our students' academic achievements, competitions, research, sports, and community impact.</p>

              <div class="mt-6 flex flex-wrap gap-3">
                <a href="#achievements" class="px-5 py-3 rounded-xl bg-brand-green text-white font-semibold shadow hover:shadow-md transition">Explore Achievements</a>
                <a href="#" class="px-5 py-3 rounded-xl border border-brand-blue text-brand-blue hover:bg-brand-blue/10 font-semibold">Submit Achievement</a>
              </div>

              <div class="mt-8 hero-card p-5">
                <div class="flex flex-col sm:flex-row gap-3">
                  <div class="relative flex-1 sm:max-w-md">
                    <span class="absolute inset-y-0 left-3 flex items-center text-gray-400">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor"><path d="M10 2a8 8 0 105.293 14.293l4.707 4.707 1.414-1.414-4.707-4.707A8 8 0 0010 2zm0 2a6 6 0 110 12A6 6 0 0110 4z"/></svg>
                    </span>
                    <input x-model.debounce.300ms="query" type="text" placeholder="Search by title, team, tags..." class="w-full pl-10 pr-3 py-3 rounded-xl border border-gray-200 dark:border-gray-800 bg-white/70 dark:bg-gray-900/70 backdrop-blur placeholder:text-gray-400 text-gray-900 dark:text-gray-100" />
                  </div>
                  <div class="flex gap-3 justify-center">
                    <select x-model="filters.year" class="rounded-xl border border-gray-200 dark:border-gray-800 bg-white/70 dark:bg-gray-900/70 px-3 py-3 text-gray-900 dark:text-gray-100">
                      <option value="">All Years</option>
                      <template x-for="y in years" :key="y">
                        <option :value="y" x-text="y"></option>
                      </template>
                    </select>
                    <select x-model="sort" class="rounded-xl border border-gray-200 dark:border-gray-800 bg-white/70 dark:bg-gray-900/70 px-3 py-3 text-gray-900 dark:text-gray-100">
                      <option value="date-desc">Newest first</option>
                      <option value="date-asc">Oldest first</option>
                      <option value="title-asc">Title A→Z</option>
                      <option value="title-desc">Title Z→A</option>
                    </select>
                  </div>
                </div>
                <div class="mt-4 flex flex-wrap gap-2">
                  <template x-for="cat in categories" :key="cat">
                    <button @click="toggleCategory(cat)" :class="selectedCategories.includes(cat) ? 'chip-selected' : 'bg-white/70 dark:bg-gray-900/70 text-gray-700 dark:text-gray-200'" class="px-3 py-1.5 rounded-full text-sm border hover:shadow transition-colors">
                      <span x-text="cat"></span>
                    </button>
                  </template>
                </div>
              </div>
            </div>

            <!-- Right: Stats Card -->
            <div>
              <div class="hero-card p-6" x-data="statCounter(stats)" x-init="start()">
                <div class="grid sm:grid-cols-2 gap-5">
                  <div class="p-5 rounded-xl border border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 hover:shadow-md transition transform hover:-translate-y-0.5">
                    <div class="flex items-center justify-between">
                      <div class="text-xs uppercase tracking-wide text-gray-500">Total Achievements</div>
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor" style="color: var(--brand-blue)"><path d="M12 2l3 7h7l-5.5 4.1L18 21l-6-3.8L6 21l1.5-7.9L2 9h7z"/></svg>
                    </div>
                    <div class="mt-2 text-4xl font-extrabold" style="color: var(--brand-blue)" x-text="c.total"></div>
                  </div>
                  <div class="p-5 rounded-xl border border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 hover:shadow-md transition transform hover:-translate-y-0.5">
                    <div class="flex items-center justify-between">
                      <div class="text-xs uppercase tracking-wide text-gray-500">Categories</div>
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor" style="color: var(--brand-green)"><path d="M3 5h18v2H3V5zm0 6h18v2H3v-2zm0 6h18v2H3v-2z"/></svg>
                    </div>
                    <div class="mt-2 text-4xl font-extrabold" style="color: var(--brand-green)" x-text="c.categories"></div>
                  </div>
                  <div class="p-5 rounded-xl border border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 hover:shadow-md transition transform hover:-translate-y-0.5">
                    <div class="flex items-center justify-between">
                      <div class="text-xs uppercase tracking-wide text-gray-500">Latest Year</div>
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor" style="color: var(--brand-amber)"><path d="M7 11h10v2H7v-2zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>
                    </div>
                    <div class="mt-2 text-4xl font-extrabold" style="color: var(--brand-amber)" x-text="c.latestYear"></div>
                  </div>
                  <div class="p-5 rounded-xl border border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 hover:shadow-md transition transform hover:-translate-y-0.5">
                    <div class="flex items-center justify-between">
                      <div class="text-xs uppercase tracking-wide text-gray-500">People Involved</div>
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor" style="color: var(--brand-blue)"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3zM8 11c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5C15 14.17 10.33 13 8 13zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
                    </div>
                    <div class="mt-2 text-4xl font-extrabold" style="color: var(--brand-blue)" x-text="c.people"></div>
                  </div>
                </div>
                <div class="mt-5 p-4 rounded-xl border border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900">
                  <div class="flex items-center gap-2 mb-3">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor" style="color: var(--brand-amber)">
                      <path d="M12 2l3 7h7l-5.5 4.1L18 21l-6-3.8L6 21l1.5-7.9L2 9h7z"/>
                    </svg>
                    <h4 class="text-sm font-semibold text-gray-700 dark:text-gray-300">Recognized By</h4>
                  </div>
                  <div class="logo-marquee">
                    <div class="logo-track">
                      <img src="photos/logos/nasaspaceapps.png" alt="NASA Space Apps Challenge" class="partner-logo" loading="lazy" />
                      <img src="photos/logos/brac university.jpg" alt="BRAC University" class="partner-logo" loading="lazy" />
                      <img src="photos/logos/unesco dhaka.jpg" alt="UNESCO Dhaka" class="partner-logo" loading="lazy" />
                      <img src="photos/aibalogo.jpg" alt="AIBA Sylhet" class="partner-logo" loading="lazy" />
                      <!-- Duplicate set for seamless loop -->
                      <img src="photos/logos/nasaspaceapps.png" alt="NASA Space Apps Challenge" class="partner-logo" loading="lazy" />
                      <img src="photos/logos/brac university.jpg" alt="BRAC University" class="partner-logo" loading="lazy" />
                      <img src="photos/logos/unesco dhaka.jpg" alt="UNESCO Dhaka" class="partner-logo" loading="lazy" />
                      <img src="photos/aibalogo.jpg" alt="AIBA Sylhet" class="partner-logo" loading="lazy" />
                    </div>
                  </div>
                </div>
                <div class="mt-6 p-4 rounded-xl border border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 flex items-center gap-3">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor" style="color: var(--brand-green)"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
                  <p class="text-sm text-gray-700 dark:text-gray-300">Greatness grows from consistent effort and the courage to aim higher.</p>
                </div>
              </div>
            </div>
          </div>

          
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="py-10">
      <!-- Achievements Grid -->
      <div id="achievements" class="container mx-auto px-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        <template x-for="item in visibleItems" :key="item.id">
          <div class="group bg-white dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-800 overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1 card-border">
            <div class="relative">
              <img :src="item.image" :alt="item.title" class="w-full h-56 object-cover" loading="lazy" />
              <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition"></div>
              <div class="absolute top-3 left-3">
                <span class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-white/90 dark:bg-gray-800/90 text-brand-green border border-brand-green/40" x-text="item.category"></span>
              </div>
            </div>
            <div class="p-6">
              <p class="text-xs font-semibold" style="color: var(--brand-amber)" x-text="formatDate(item.date)"></p>
              <h3 class="text-xl font-bold text-gray-900 dark:text-white mt-1" x-text="eventName(item)"></h3>
              <div class="mt-1 text-sm text-gray-600 dark:text-gray-300" x-show="item.team || item.teamName">
                <span class="font-semibold">Team/Participant (s):</span>
                <span x-text="teamFull(item)"></span>
                <template x-if="item.batches">
                  <span class="ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-semibold border border-brand-green/40 text-brand-green bg-white dark:bg-gray-900">
                    <span>Batch:</span>
                    <span class="ml-1" x-text="item.batches"></span>
                  </span>
                </template>
              </div>
              <p class="mt-2 text-gray-700 dark:text-gray-300 font-medium" x-text="achievementText(item)"></p>
              <!-- Highlighted achievement status & metadata before logos -->
              <div class="mt-3 flex flex-wrap items-center gap-3">
                <template x-if="item.status">
                  <span class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-brand-blue text-white border border-brand-blue" x-text="item.status"></span>
                </template>
              </div>
              <div class="mt-4 flex flex-wrap gap-2">
                <template x-for="t in item.tags" :key="t">
                  <span class="px-2 py-1 rounded-full text-xs bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-700" x-text="t"></span>
                </template>
              </div>
              <!-- Organizations (logos) -->
              <div class="mt-4 flex items-center gap-3" x-show="item.organizations && item.organizations.length">
                <template x-for="org in item.organizations.slice(0,3)" :key="org.name">
                  <img :src="org.logo" :alt="org.name" class="org-logo" loading="lazy" />
                </template>
              </div>
              <div class="mt-5 flex items-center justify-between">
                <button @click="openModal(item)" class="inline-flex items-center gap-2 font-semibold" style="color: var(--brand-blue)">
                  See more
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" /></svg>
                </button>
                <div class="text-xs text-gray-500 dark:text-gray-400" x-text="item.location"></div>
              </div>
            </div>
          </div>
        </template>
      </div>

      <!-- Load more -->
      <div class="container mx-auto px-6">
        <div class="mt-10 text-center" x-show="visibleItems.length < filtered.length">
          <button @click="loadMore" class="px-5 py-3 rounded-xl bg-brand-blue text-white font-semibold shadow hover:shadow-md transition">Load more</button>
        </div>
        <div class="mt-10 text-center text-sm text-gray-500 dark:text-gray-400" x-show="filtered.length === 0">
          No achievements found. Try clearing filters or changing your search.
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gradient-to-b from-white/60 to-gray-50/80 dark:from-gray-900/60 dark:to-gray-950/80 border-t border-gray-200 dark:border-gray-800 mt-16">
      <div class="container mx-auto px-6 py-12">
        <div class="max-w-4xl mx-auto">
          <!-- Main Footer Content -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
            <!-- AIBA Info -->
            <div class="text-center md:text-left">
              <div class="flex items-center gap-2 justify-center md:justify-start mb-3">
                <img src="photos/aibalogo.jpg" alt="AIBA Logo" class="h-8 w-auto rounded shadow-sm" loading="lazy" />
                <h3 class="font-bold text-lg" style="color: var(--brand-green)">AIBA Sylhet</h3>
              </div>
              <p class="text-sm text-gray-600 dark:text-gray-400">Army Institute of Business Administration</p>
            </div>
            
            <!-- Quick Links -->
            <div class="text-center">
              <h4 class="font-semibold text-gray-900 dark:text-white mb-3">Hall of Fame</h4>
              <p class="text-sm text-gray-600 dark:text-gray-400">Celebrating excellence in academics, research, sports, and community service.</p>
            </div>
            
          </div>
          
          <!-- Divider -->
          <div class="border-t border-gray-200 dark:border-gray-800 pt-6">
            <div class="flex flex-col md:flex-row items-center justify-between gap-4 text-sm">
              <p class="text-gray-600 dark:text-gray-400">© 2025 AIBA Sylhet. All rights reserved.</p>
              <p class="font-semibold" style="color: var(--brand-green)">
                Design & Developed by <span class="font-bold">Md Golam Mubasshir Rafi</span>
              </p>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <!-- Detail Modal -->
    <div x-show="showModal" x-transition.opacity class="fixed inset-0 z-50 flex items-center justify-center">
      <div @click="closeModal" class="absolute inset-0 bg-black/50"></div>
      <div x-trap.noscroll.inert="showModal" class="relative bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-w-3xl w-[92vw] border border-gray-200 dark:border-gray-800 overflow-hidden" @keydown.escape.window="closeModal">
        <div class="grid md:grid-cols-2">
          <img :src="active?.image" :alt="active?.title" class="w-full h-64 md:h-full object-cover">
          <div class="p-6">
            <div class="flex items-center justify-between gap-3">
              <span class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-700" x-text="active?.category"></span>
              <button @click="closeModal" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800" aria-label="Close">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor"><path d="M18.3 5.71L12 12.01l-6.3-6.3-1.41 1.41 6.3 6.3-6.3 6.3 1.41 1.41 6.3-6.3 6.3 6.3 1.41-1.41-6.3-6.3 6.3-6.3z"/></svg>
              </button>
            </div>
            <h3 class="mt-3 text-2xl font-bold text-gray-900 dark:text-white" x-text="active?.title"></h3>
            <p class="text-sm text-amber-700 dark:text-amber-400 mt-1" x-text="formatDate(active?.date)"></p>
            <p class="text-gray-700 dark:text-gray-300 mt-2" x-text="active?.subtitle"></p>
            <p class="text-gray-600 dark:text-gray-400 mt-4" x-text="active?.description"></p>
            <!-- Organizations -->
            <div class="mt-4" x-show="active?.organizations && active.organizations.length">
              <div class="text-xs uppercase tracking-wide text-gray-500 mb-2">Associated</div>
              <div class="flex items-center gap-3 flex-wrap">
                <template x-for="org in active.organizations" :key="org.name">
                  <div class="inline-flex items-center gap-2">
                    <img :src="org.logo" :alt="org.name" class="org-logo-lg" loading="lazy"/>
                    <span class="text-sm text-gray-700 dark:text-gray-300" x-text="org.name"></span>
                  </div>
                </template>
              </div>
            </div>
            <!-- Links -->
            <div class="mt-4" x-show="active?.links && active.links.length">
              <div class="text-xs uppercase tracking-wide text-gray-500 mb-2">Project Links</div>
              <div class="flex flex-wrap gap-2">
                <template x-for="l in active.links" :key="l.url">
                  <a :href="l.url" target="_blank" class="inline-flex items-center gap-2 px-3 py-1.5 rounded-lg border border-brand-blue text-brand-blue hover:bg-brand-blue/10 text-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor"><path d="M3 12a1 1 0 011-1h8a1 1 0 010 2H4a1 1 0 01-1-1zm15.293-7.707a1 1 0 011.414 0l2.707 2.707a1 1 0 010 1.414l-8.486 8.486a1 1 0 01-.53.277l-3.536.707a1 1 0 01-1.177-1.177l.707-3.536a1 1 0 01.277-.53l8.486-8.486z"/></svg>
                    <span x-text="l.label"></span>
                  </a>
                </template>
              </div>
            </div>
            <!-- Team -->
            <div class="mt-4" x-show="active?.team && active.team.length">
              <div class="text-xs uppercase tracking-wide text-gray-500 mb-2">Team</div>
              <ul class="space-y-1">
                <template x-for="m in active.team" :key="m.name">
                  <li class="text-sm text-gray-700 dark:text-gray-300"><span class="font-semibold" x-text="m.name"></span><span x-text="m.role ? ' — ' + m.role : ''"></span></li>
                </template>
              </ul>
            </div>
            <!-- Gallery -->
            <div class="mt-4" x-show="active?.gallery && active.gallery.length">
              <div class="text-xs uppercase tracking-wide text-gray-500 mb-2">Gallery</div>
              <div class="grid grid-cols-3 gap-2">
                <template x-for="g in active.gallery" :key="g">
                  <img :src="g" alt="gallery" class="w-full h-20 object-cover rounded-md border border-gray-200 dark:border-gray-800" loading="lazy"/>
                </template>
              </div>
            </div>
            <div class="mt-4 flex flex-wrap gap-2">
              <template x-for="t in (active?.tags || [])" :key="t">
                <span class="px-2 py-1 rounded-full text-xs bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-700" x-text="t"></span>
              </template>
            </div>
            <div class="mt-6 text-xs text-gray-500 dark:text-gray-400" x-show="active?.location">
              <span class="font-semibold">Location:</span> <span x-text="active?.location"></span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Background audio: place your licensed/owned file at assets/audio/hall-of-fame.mp3 -->
    <audio id="bg-audio" preload="auto" src="music/The Script - Hall Of Fame (Lyrics).mp3"></audio>

    <!-- App Script: demo data + behaviors -->
    <script>
      function hofApp() {
        return {
          theme: 'light',
          query: '',
          sort: 'date-desc',
          filters: { year: '' },
          categories: ['Competition', 'Research', 'Academic', 'Event', 'Sports', 'Community'],
          selectedCategories: [],
          years: [],
          data: [],
          filtered: [],
          visibleItems: [],
          pageSize: 6,
          showModal: false,
          active: null,
          stats: { total: 0, categories: 0, latestYear: '-', people: 0 },
          audioPlaying: false,
          celebrate: false,
          autoCelebrate: true,
          confettiInterval: null,

          // Seed demo achievements (was previously misplaced on prototype)
          seed() {
            return [
              { id: 1, title: 'NASA Space Apps 2025', team: 'AIBA SpaceWeb (Rafy, Afsara)', date: '2025-10-26', category: 'Competition', location: 'Sylhet', tags: ['Space','Hackathon','Runner Up'], image: 'https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=1200&auto=format&fit=crop', description: "Successfully achieved 1st Runner Up in the Sylhet region with project 'OrbitBiZ'." },
              { id: 2, title: 'AIBA National Half Marathon', team: 'Core Organizing Team', date: '2025-09-14', category: 'Event', location: 'Sylhet', tags: ['Marathon','Organizing','Web'], image: 'https://images.unsplash.com/photo-1534367610401-9f5ed68180aa?q=80&w=1200&auto=format&fit=crop', description: 'Managed the complete event website and data management for the successful marathon.' },
              { id: 3, title: 'ICCTASS 2025', team: 'Fariha F. Proma, GM Rafi', date: '2025-11-03', category: 'Research', location: 'Dhaka', tags: ['Conference','Solar','Microfinance'], image: 'https://images.unsplash.com/photo-1518770660439-4636190af475?q=80&w=1200&auto=format&fit=crop', description: 'Research paper on "Microfinance-Enabled Solar Home Systems" accepted for presentation.' },
              { id: 4, title: 'Inter-University Programming Contest', team: 'AIBA Coders (Rafi, Proma, Afsara)', date: '2024-08-18', category: 'Competition', location: 'Chittagong', tags: ['ICPC','Algorithms'], image: 'https://images.unsplash.com/photo-1556157382-97eda2d62296?q=80&w=1200&auto=format&fit=crop', description: 'Secured 5th position among 60+ teams with optimized solutions and clean implementations.' },
              { id: 5, title: 'National Research Grant Award', team: 'Fariha F. Proma, GM Rafi', date: '2023-12-01', category: 'Research', location: 'Sylhet', tags: ['Grant','Energy','Innovation'], image: 'https://images.unsplash.com/photo-1518770660439-4636190af475?q=80&w=1200&auto=format&fit=crop', description: 'Awarded a national grant for prototype development of low-cost solar micro-inverters.' },
              { id: 6, title: 'Community Tech Bootcamp', team: 'AIBA Dev Club (Mentors)', date: '2025-02-15', category: 'Community', location: 'Sylhet', tags: ['Mentoring','Web','Career'], image: 'https://images.unsplash.com/photo-1529336953121-ad5a0d43d0fa?q=80&w=1200&auto=format&fit=crop', description: 'Conducted a 3-day bootcamp on web fundamentals and modern tooling for 80+ students.' },
              { id: 7, title: 'University Sports Fest – Football', team: 'AIBA United', date: '2024-11-21', category: 'Sports', location: 'Sylhet', tags: ['Football','Champion'], image: 'https://images.unsplash.com/photo-1543325995-6fe7a6f6b3f3?q=80&w=1200&auto=format&fit=crop', description: 'Champions after a thrilling final; coordinated training and match analytics.' },
              { id: 8, title: 'Robotics Challenge – Line Follower', team: 'RoboAIBA', date: '2023-09-05', category: 'Competition', location: 'Dhaka', tags: ['Robotics','Electronics'], image: 'https://images.unsplash.com/photo-1581092921461-eab62e97a780?q=80&w=1200&auto=format&fit=crop', description: 'Custom PID implementation achieved top-3 time in a national robotics meet.' },
              { id: 9, title: 'Open Source Contribution Sprint', team: 'AIBA OSS', date: '2025-06-22', category: 'Community', location: 'Online', tags: ['Open Source','GitHub','Hacktoberfest'], image: 'https://images.unsplash.com/photo-1555066931-4365d14bab8c?q=80&w=1200&auto=format&fit=crop', description: 'Dozens of PRs merged across documentation, accessibility, and performance fixes.' },
              { id: 10, title: 'Data Science Symposium Poster', team: 'Afsara, Rafy', date: '2024-03-09', category: 'Research', location: 'Dhaka', tags: ['Poster','ML','Data'], image: 'https://images.unsplash.com/photo-1515879218367-8466d910aaa4?q=80&w=1200&auto=format&fit=crop', description: 'Presented findings on community health dataset analysis and model interpretability.' },
              { id: 11, title: 'AIBA Tech Fair 2025', team: 'Organizing Committee', date: '2025-01-25', category: 'Event', location: 'Sylhet', tags: ['Expo','Showcase'], image: 'https://images.unsplash.com/photo-1504384308090-c894fdcc538d?q=80&w=1200&auto=format&fit=crop', description: 'Hosted 40+ booths with interactive demos; handled logistics and digital registration.' },
              { id: 12, title: 'Inter-Dept Basketball Tournament', team: 'AIBA Hoops', date: '2023-07-12', category: 'Sports', location: 'Sylhet', tags: ['Basketball','Runner Up'], image: 'https://images.unsplash.com/photo-1546519638-68e109498ffc?q=80&w=1200&auto=format&fit=crop', description: 'Secured 2nd place; focused on team defense and rotations.' },
              { id: 13, title: "Dean's List 2025", team: 'Multiple Awardees', date: '2025-08-01', category: 'Academic', location: 'Sylhet', tags: ['Academic','Excellence'], image: 'https://images.unsplash.com/photo-1523580846011-d3a5bc25702b?q=80&w=1200&auto=format&fit=crop', description: "Students recognized on the Dean's List for outstanding academic performance (CGPA ≥ 3.75)." },
              { id: 14, title: 'National Math Olympiad Finalist', team: 'AIBA Academic Team', date: '2024-01-20', category: 'Academic', location: 'Dhaka', tags: ['Olympiad','Mathematics'], image: 'https://images.unsplash.com/photo-1509228627152-72ae9ae6848d?q=80&w=1200&auto=format&fit=crop', description: 'Qualified for the national finals with high scores in problem-solving and number theory.' },
              { id: 15, title: 'Presidential Scholarship Award', team: 'Scholarship Recipients Cohort', date: '2025-07-10', category: 'Academic', location: 'Sylhet', tags: ['Scholarship','Academic Excellence'], image: 'https://images.unsplash.com/photo-1523050854058-8df90110c9f1?q=80&w=1200&auto=format&fit=crop', description: 'Students honored with merit-based Presidential Scholarship for exceptional GPA and leadership.' },
              { id: 16, title: 'Regional Cricket Championship', team: 'AIBA Warriors', date: '2024-12-05', category: 'Sports', location: 'Sylhet', tags: ['Cricket','Champions'], image: 'https://images.unsplash.com/photo-1517927033932-b3d18e61fb3a?q=80&w=1200&auto=format&fit=crop', description: 'Clinched the regional cricket title with strategic bowling and disciplined batting.' },
              { id: 17, title: 'Inter-University Debate Champion', team: 'AIBA Orators', date: '2025-03-14', category: 'Competition', location: 'Dhaka', tags: ['Debate','Public Speaking'], image: 'https://images.unsplash.com/photo-1573496782646-47306b876d3f?q=80&w=1200&auto=format&fit=crop', description: 'Won the debate championship with compelling arguments on sustainability and ethics.' },
              { id: 18, title: 'Startup Pitch Night Winner', team: 'InnovateAIBA (Rafy, Afsara, Proma)', date: '2025-04-28', category: 'Competition', location: 'Sylhet', tags: ['Startup','Entrepreneurship'], image: 'https://images.unsplash.com/photo-1519389950473-47ba0277781c?q=80&w=1200&auto=format&fit=crop', description: 'First place for AI-enabled rural micro-loan scoring platform improving inclusion.' },
              { id: 19, title: 'Blood Donation & Health Camp', team: 'AIBA Volunteer Network', date: '2025-02-05', category: 'Community', location: 'Sylhet', tags: ['Health','Volunteer','Service'], image: 'https://images.unsplash.com/photo-1584515933487-779824d29309?q=80&w=1200&auto=format&fit=crop', description: 'Organized campus-wide health check & blood donation drive supporting hospitals.' },
              { id: 20, title: 'IEEE Access Journal Publication', team: 'Proma, Rafi, Afsara', date: '2025-05-18', category: 'Research', location: 'Online', tags: ['Publication','Energy','IoT'], image: 'https://images.unsplash.com/photo-1553877522-43269d4ea984?q=80&w=1200&auto=format&fit=crop', description: 'Published article on predictive maintenance of solar micro-grids with edge IoT.' },
              { id: 21, title: 'National Cybersecurity CTF Top 10', team: 'AIBA SecOps', date: '2024-10-02', category: 'Competition', location: 'Online', tags: ['Cybersecurity','CTF','Forensics'], image: 'https://images.unsplash.com/photo-1510511459019-5dda7724fd87?q=80&w=1200&auto=format&fit=crop', description: 'Finished top 10 nationally solving reverse engineering and crypto challenges.' },
              { id: 22, title: 'Badminton Doubles Gold', team: 'AIBA Smash Squad', date: '2023-06-18', category: 'Sports', location: 'Sylhet', tags: ['Badminton','Gold'], image: 'https://images.unsplash.com/photo-1605296867304-46d5465a13f1?q=80&w=1200&auto=format&fit=crop', description: 'Won gold in inter-department badminton doubles through agile coordination.' }
              ,
              {
                id: 23,
                title: 'Strategic Innovation in Orbit: A Business Student Team’s Journey at NASA Space Apps Challenge 2025',
                subtitle: 'OrbitBiZ: Pioneering Sustainable LEO Commerce',
                date: '2025-10-05',
                category: 'Competition',
                location: 'Sylhet',
                event: 'NASA International Space Apps Challenge 2025',
                teamName: 'AIBA SpaceWeb',
                featured: true,
                status: 'Global Nominee & 1st Runner-up (Sylhet)',
                batches: 'BBA-11 & BBA-12',
                tags: ['NASA Space Apps 2025','LEO','Business Strategy','AI','Mapbox'],
                image: 'photos/AIBA SpaceWeb/photos 01.jpg',
                description: "OrbitBiZ is a SIaaS platform for sustainable LEO commerce — tracking objects with NASA data, predicting collisions with AI, and delivering interactive maps with a clear business model.",
                links: [
                  { label: 'Project', url: 'https://orbitbiz.gmrafi.com/' },
                  { label: 'Project Page', url: 'https://www.spaceappschallenge.org/.../aiba-spaceweb/...' },
                  { label: 'GitHub', url: 'https://github.com/gmrafi/OrbitEdge' }
                ],
                team: [
                  { name: 'Md Golam Mubasshir Rafi', role: 'Business Analytics & Technical Lead' },
                  { name: 'Mshrura Meshkat Punno', role: 'Financial Modeling & Strategy' },
                  { name: 'Al Razi', role: 'Market Analysis & Operations' },
                  { name: 'Rukaiya Binte Amin', role: 'Risk Assessment & Compliance' },
                  { name: 'Israt Zarin Ruponty', role: 'Researcher' },
                  { name: 'S M Mosaddad Ali', role: 'Researcher' }
                ],
                organizations: [
                  { name: 'NASA Space Apps', logo: 'photos/logos/nasaspaceapps.png' },
                  { name: 'AIBA Sylhet', logo: 'photos/aibalogo.jpg' }
                ],
                gallery: [
                  'photos/AIBA SpaceWeb/photos 01.jpg',
                  'photos/AIBA SpaceWeb/ph 0.jpg',
                  'photos/AIBA SpaceWeb/ph 2.jpg',
                  'photos/AIBA SpaceWeb/ph 3.jpg'
                ]
              },
              {
                id: 24,
                title: 'Third Place (English) — Disability Equality in the Media Essay 2024',
                subtitle: 'Mainstreaming Disability in Media’s Newsroom and Programming',
                date: '2024-12-03',
                category: 'Competition',
                location: 'Dhaka',
                event: 'Disability Equality in the Media — Essay Competition 2024',
                teamName: 'Mashrura Meshkat Punno',
                featured: true,
                status: 'Winner & 2nd Runner up (English Segment)',
                batches: 'BBA-11',
                tags: ['Essay','UNESCO','Accessibility','English Segment','Top 3'],
                image: 'photos/UNESCO-Punno/495382315_1126558322829123_7417690542584040103_n.jpg',
                description: 'Secured 3rd place (English segment) in the “Disability Equality in the Media” essay competition, organized by Somashte in collaboration with UNESCO.',
                organizations: [
                  { name: 'UNESCO Dhaka', logo: 'photos/logos/unesco dhaka.jpg' },
                  { name: 'AIBA Sylhet', logo: 'photos/aibalogo.jpg' }
                ],
                team: [
                  { name: 'Mashrura Meshkat Punno', role: 'Winner — English Segment (3rd)' }
                ],
                gallery: [
                  'photos/UNESCO-Punno/495382315_1126558322829123_7417690542584040103_n.jpg',
                  'photos/UNESCO-Punno/504214209_1126557912829164_1752817690339759817_n.jpg'
                ]
              }
              ,
              {
                id: 25,
                title: 'Sylhet Divisional Champion — Imagen Ventures Youth Challenge 2024-25',
                subtitle: 'Entrepreneurship & Innovation — Divisional Champion',
                date: '2024-09-20',
                category: 'Competition',
                location: 'Sylhet',
                event: 'Imagen Ventures Youth Challenge 2024-25',
                teamName: 'Numb Brain',
                status: 'Sylhet Divisional Champion',
                featured: true,
                batches: 'BBA-12',
                tags: ['Entrepreneurship','Innovation','Youth Challenge','Sylhet'],
                image: 'photos/Imagen Ventures Youth Challenge 2024-25/photos 1.jpg',
                description: 'Team “Numb Brain” won the Sylhet divisional round, earning a spot at the national finals organized by JAAGO Foundation in partnership with UNICEF.',
                organizations: [
                  { name: 'AIBA Sylhet', logo: 'photos/aibalogo.jpg' }
                ],
                team: [
                  { name: 'Saraf Nawar Rodela' },
                  { name: 'Sabikunnahar Mahi' },
                  { name: 'Tahsan Faiz Naeem' }
                ],
                gallery: [
                  'photos/Imagen Ventures Youth Challenge 2024-25/photos 1.jpg'
                ]
              }
            ];
          },

          init() {
            // Force light theme only
            this.theme = 'light';
            document.documentElement.classList.remove('dark');

            // Demo dataset
            this.data = this.seed();
            this.years = Array.from(new Set(this.data.map(d => new Date(d.date).getFullYear()))).sort((a,b) => b-a);

            this.applyFilters();
            this.computeStats();

            // Ensure celebration class matches initial state
            this.updateCelebrate();

            // Audio setup: set default volume and sync playing state
            const audio = document.getElementById('bg-audio');
            if (audio) {
              audio.volume = 0.6;
              audio.addEventListener('play', () => {
                this.audioPlaying = true;
                if (this.autoCelebrate) { this.celebrate = true; this.updateCelebrate(); }
              });
              audio.addEventListener('pause', () => {
                this.audioPlaying = false;
                if (this.autoCelebrate) { this.celebrate = false; this.updateCelebrate(); }
              });
              audio.addEventListener('ended', () => {
                this.audioPlaying = false;
                if (this.autoCelebrate) { this.celebrate = false; this.updateCelebrate(); }
              });
            }
          },

          toggleAudio() {
            const el = document.getElementById('bg-audio');
            if (!el) return;
            if (el.paused) {
              el.play().then(() => { this.audioPlaying = true; }).catch(() => {});
            } else {
              el.pause();
              this.audioPlaying = false;
            }
          },

          toggleCelebrate() {
            this.autoCelebrate = false;
            this.celebrate = !this.celebrate;
            this.updateCelebrate();
          },
          updateCelebrate() {
            const root = document.documentElement;
            if (this.celebrate) {
              root.classList.add('celebrate');
              this.startConfettiLoop();
            } else {
              root.classList.remove('celebrate');
              this.stopConfettiLoop();
            }
          },
          startConfettiLoop() {
            if (this.confettiInterval) return;
            let container = document.querySelector('.confetti-container');
            if (!container) {
              container = document.createElement('div');
              container.className = 'confetti-container';
              document.body.appendChild(container);
            }
            this.confettiInterval = setInterval(() => this.spawnConfettiBatch(container), 900);
            this.spawnConfettiBatch(container);
          },
          stopConfettiLoop() {
            if (this.confettiInterval) {
              clearInterval(this.confettiInterval);
              this.confettiInterval = null;
            }
            const container = document.querySelector('.confetti-container');
            if (container) container.innerHTML = '';
          },
          spawnConfettiBatch(container) {
            const colors = ['var(--brand-green)','var(--brand-amber)','var(--brand-blue)'];
            const count = 24;
            for (let i=0; i<count; i++) {
              const piece = document.createElement('span');
              piece.className = 'confetti-piece';
              piece.style.left = Math.random() * 100 + 'vw';
              piece.style.background = colors[Math.floor(Math.random()*colors.length)];
              piece.style.setProperty('--dur', (2 + Math.random()*2).toFixed(2) + 's');
              piece.style.transform = `translateY(0) rotate(${Math.floor(Math.random()*360)}deg)`;
              container.appendChild(piece);
              const durStyle = getComputedStyle(piece).getPropertyValue('--dur');
              const durMs = parseFloat(durStyle) * 1000;
              setTimeout(() => { piece.remove(); }, durMs + 50);
            }
          },

          formatDate(d) {
            if (!d) return '';
            const date = new Date(d);
            return date.toLocaleDateString(undefined, { year: 'numeric', month: 'long', day: '2-digit' });
          },
          eventName(item){ return item.event || item.category || ''; },
          teamInline(item){
            const name = item.teamName || '';
            if (Array.isArray(item.team) && item.team.length){
              const first = item.team.map(m => m.name).filter(Boolean);
              const shown = first.slice(0, 3).join(', ');
              const more = first.length > 3 ? ` +${first.length-3} more` : '';
              return (name ? name + ' — ' : '') + shown + more;
            }
            return name || (item.team || '');
          },
          teamFull(item){
            const tn = item.teamName || '';
            if (Array.isArray(item.team) && item.team.length){
              const arr = item.team.map(m => m.name).filter(Boolean);
              const names = arr.join(', ');
              if (arr.length === 1 && tn && tn.toLowerCase() === arr[0].toLowerCase()) return tn;
              return tn ? `${tn} (${names})` : `(${names})`;
            }
            return tn || (item.team || '');
          },
          achievementText(item){
            return item.subtitle || item.title || '';
          },
          ownerType(item){
            if (Array.isArray(item.team)) return item.team.length > 1 ? 'Team' : 'Person';
            return (item.teamName && (!item.team || (Array.isArray(item.team) && item.team.length <= 1))) ? 'Person' : 'Team';
          },

          toggleCategory(cat) {
            const i = this.selectedCategories.indexOf(cat);
            if (i >= 0) this.selectedCategories.splice(i, 1); else this.selectedCategories.push(cat);
            this.applyFilters(true);
          },

          loadMore() {
            const next = this.visibleItems.length + this.pageSize;
            this.visibleItems = this.filtered.slice(0, next);
          },

          openModal(item) {
            this.active = item;
            this.showModal = true;
          },
          closeModal() {
            this.showModal = false;
            this.active = null;
          },

          computeStats() {
            this.stats.total = this.data.length;
            this.stats.categories = new Set(this.data.map(d => d.category)).size;
            this.stats.latestYear = Math.max(...this.data.map(d => new Date(d.date).getFullYear()));
            // naive people count by splitting names by comma/and in team/subtitle
            const names = this.data.flatMap(d => {
              if (Array.isArray(d.team)) return d.team.map(m => m.name).filter(Boolean);
              const src = (d.team || d.subtitle || '');
              return src.split(/[,&()]/).map(s => s.trim()).filter(s => /[A-Za-z]/.test(s));
            });
            this.stats.people = new Set(names).size || this.data.length; // fallback
          },

          applyFilters(resetVisible = false) {
            const q = this.query.trim().toLowerCase();
            const year = this.filters.year;
            const hasCats = this.selectedCategories.length > 0;

            let arr = this.data.filter(d => {
              const teamText = Array.isArray(d.team) ? d.team.map(m => m.name + ' ' + (m.role||'')).join(' ') : (d.team || d.subtitle || '');
              const matchQuery = !q || [d.title, teamText, d.description, ...(d.tags||[])].join(' ').toLowerCase().includes(q);
              const matchYear = !year || new Date(d.date).getFullYear().toString() === year.toString();
              const matchCat = !hasCats || this.selectedCategories.includes(d.category);
              return matchQuery && matchYear && matchCat;
            });

            // sort with featured items first, then by selected field
            const [field, dir] = this.sort.split('-');
            const cmp = (a,b) => {
              const af = !!a.featured, bf = !!b.featured;
              if (af !== bf) return af ? -1 : 1; // featured first
              if (field === 'date') {
                const da = new Date(a.date).getTime();
                const db = new Date(b.date).getTime();
                return dir === 'asc' ? da - db : db - da;
              }
              const ta = (a.title||'').toLowerCase();
              const tb = (b.title||'').toLowerCase();
              return dir === 'asc' ? (ta > tb ? 1 : ta < tb ? -1 : 0) : (ta < tb ? 1 : ta > tb ? -1 : 0);
            };
            arr.sort(cmp);

            this.filtered = arr;
            this.visibleItems = resetVisible ? arr.slice(0, this.pageSize) : arr.slice(0, Math.max(this.visibleItems.length || this.pageSize, this.pageSize));
          },

          // Watchers (simple manual)
        };
      }

      // Small helper to animate counters for the stats tiles
      function statCounter(source) {
        return {
          c: { total: 0, categories: 0, latestYear: 0, people: 0 },
          target: source,
          duration: 1000,
          start() {
            this.animate('total', this.target.total);
            this.animate('categories', this.target.categories);
            this.animate('latestYear', this.target.latestYear);
            this.animate('people', this.target.people);
          },
          animate(key, to) {
            const start = performance.now();
            const step = (now) => {
              const p = Math.min((now - start) / this.duration, 1);
              this.c[key] = Math.floor(to * p);
              if (p < 1) requestAnimationFrame(step);
            };
            requestAnimationFrame(step);
          },
        };
      }

      document.addEventListener('alpine:init', () => {
        // Manual watchers using mutation of Alpine state
        Alpine.effect(() => {
          const state = Alpine.$data(document.body);
          if (!state) return;
          // Recompute when query/sort/filters change
          state.query; state.sort; state.filters.year; state.selectedCategories.length;
          Promise.resolve().then(() => state.applyFilters(true));
        });
      });

      // Demo dataset
      // (Removed previous prototype-based seed; now integrated directly.)
    </script>
  </body>
</html>
